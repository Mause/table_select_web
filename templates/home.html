{% extends "base.html" %}
{% block title %}Ball Table Select{% end %}
{% block content %}
    <!--
    ME from the future!
    The the exclamation mark in all the parts {{! is needed to make the tornado
    template engine ignore those tags, so they get passed through to Handlebars.js :D
    -->

    <script type="text/x-handlebars">
        {{!outlet}}
    </script>


    <script type="text/x-handlebars" data-template-name="ball_tables">
        <div style="margin-left:18.15%">
            <div id="tableContainer" class="fixmargin">
                {{!! iterate through each table}}
                {{!#each controller}}
                    <div class="enclosure space_below span5" data-table-id="{{!table_num}}" id="table-{{!table_num}}">
                        <h2 style="color:black;">{{!table_name}}</h2>

                        {{!# unless full }}
                             {{!view TableSelectWeb.AddAttendeeView}}
                        {{!/unless}}
                        {{!partial "attendee_list"}}
                    </div>

                {{!! logic to make sure the tables are evenly layed out}}
                {{!#if row}}
                </div>
                {{!else}}
                <div class="row">
                {{!/if}}

                {{!/each}}
            </div>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="addAttendee">
        <div class="submit_attendee_form">
            <form class="well submit_attendee">
                <label>
                    <strong>Attendee name:</strong> {{!view Ember.TextField valueBinding="view.attendee_name"}}
                </label>
                <button {{!action addAttendee action="view" }} type="submit" class="btn btn-primary">Submit attendee</button>
            </form>
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="_single_attendee">
        <li class="attendee">
            <span tabindex="-1">
                {{!attendee_name}}
                <button type="button" class="spec_close" data-attendee-id="{{!attendee_id}}" data-table-id="{{!unbound table_num}}"
                    onclick="javascript:app.request_remove_attendee(this)">&times;</button>
                {{!#if removal_request_exists }}
                    <i class="icon-info-sign removal_request_notif" title="Removal request pending"></i>
                {{!/if}}
            </span>
        </li>
    </script>

    <script type="text/x-handlebars" data-template-name="_attendee_list">
        <div>
            {{!#if attendees}}
                <div class="custom-dropdown clearfix attendee_list" data-table-id="{{!unbound table_num}}">
                    <ul class="custom-dropdown-menu dropdown-menu-customization" role="menu">
                        {{!#each attendees}}
                            {{!>single_attendee}}
                        {{!/each}}
                    </ul>
                </div>
            {{!else}}
                <h5>No attendees on this table yet</h5>
            {{!/if}}
        </div>
    </script>

    <div>
        <!-- Modal -->
        <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3 id="myModalLabel">Modal header</h3>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            </div>
        </div>
    </div>

{% end %}
